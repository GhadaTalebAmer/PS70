<!DOCTYPE html>
<html lang="en">
<head>
  <title>PHYSCI 70: Intro to Digital Fabrication </title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
  <link href="../style.css" rel="stylesheet">
  <style> 

    .center {
  display: block;
  margin-left: 20px;
  margin-right: auto;
  width: 20%;
}
</style>
</head>
<body>

<div class="jumbotron text-center">
  <h3>Assignment 10: Wireless Networking </h3> 
  <br>     
  </div>

      <br>
        <div class="container text">
    <br> 
    <h3> The Assignment </h3>
    <p> This week's assignment was to demonstrate communication between a microcontroller and another device over Bluetooth or WiFi connection. I was interested in learning all the different things I could do with the Huzzah microcontroller so I decided to try out all the tutorials on the class page. Below I outline my progress with each of the four projects. I first began by configuring Arduino IDE to work with the Huzzah. So I downloaded  the relevant drivers and boards. In the following projects, I'll be working with the Adafruit ESP32 Feather.  </p>
      <br>
      <h4> <i> Project 1: Local Area Network Server </i></h4> 
      <p> In this project, I created the simple Wifi server to blink an LED on and off wirelessly. To do this, I connected the long end of an LED to output pin SCK/pin 5 on the Huzzah attached to a breadboard. I connected a wire from GND pin on the Huzzah to negative rail of the breadboard. I connective short end of the LED to the GND rail on breadboard. To communicuate with the LED wirelessly, I did the following:
        <ol>
          <li> I uploaded an example sketch from File > Examples > Examples for Adafruit ESP32 Feather > WiFi > SimpleWifiServer. </li>
          <li> I changed the ssid and password constants to my own.  </li> 
           <li> I uploaded the sketch to the Huzzah. </li>
          <div class="container text-center">
            <h4> <i> The image below shows the entire complete circuit: </i></h4>
       <p> <style="text-align:center;"><img src="./475.jpg" style="width:40%" alt="Huzzah circuit">
      </div>
          <li> I then loaded the Serial Monitor from the Arduino tools dropdown menu. I pressed the reset button on my Huzzah to load the monitor. </li>
          <li> At first, I was having issues as nothing was showing up on the serial monitor after many resets. I changed the baud selection on the Serial monitor to 115200 baud to correspond with the Serial.begin(115200) of my simple wifi server sketch and it worked. </li>
           <li> I then copied the IP address (highlighted in image below) to my web browser. </li>
           <li>On the page loaded, I pressed the links to turn the LED on and off as shown in video below. </li>
      <div class="container text-center">
            <h4> <i> The image below shows a screenshot of the Serial Monitor window: </i></h4>
       <p> <style="text-align:center;"><img src="./473.png" style="width:65%" alt="Huzzah circuit">
      </div>
      </p>
        <div class="container text-center">
           <h4> <i> Below is a video of the web browser and LED blinking as I toggle between on and off buttons: </i></h4>
       <p> <style="text-align:center;"><<video width="900" height="640" controls>
  <source src="474.mp4" type="video/mp4" alt="Huzzah blink"></video>
     </p>
      </div>

      <h4> <i> Project 2: Remote Server   </i></h4> 
      <p> After learning how to play basic melodies with the buzzer, I tried to build a police siren mechanism. I wanted to include the flashing lights and the siren sound as you would see on a police car or ambulance. I began by creating the LED circuit. I wanted to have an LED pattern of switching between blue and red flashes to create a realistic police siren. I didn't have red LEDS so I used blue and white instead. I followed the steps below to build the LED components of the circuit.
        <ol> 
          <li> I collected the materials I would need. This included: 
            <ul>
              <li> 4 LEDS - two white and two blue </li>
              <li> Breadboard </li>
              <li> Arduino Uno</li>
              <li> Some jumper cables </li>
              <li> 4 220ohm resistors </li>
            </ul>
          <li> Next, I began putting the components together. I connected the two white LEDS as follows: connected each negative terminal (shorter end) of the LED with a 220 ohm resistor to the negative rail of the breadboard. I connected these to digital pin 3 and 7 on the Arduino. </li>
          <li> To connect the blue LEDs, I connected the negative ends also to the negative terminal of the breadboard with a resistor on each negative end. I connected each positive end to pin 10 and 12 of the Arduino. </li>
        </ol>
        <p> Next, I wanted to include a buzzer to play the siren tone. To add the buzzer, I connected the positive end to pin 13 on the breadboard and the negative end to the GND rail on the breadboard (which connects to the GND pin on the Arduino). </p> 
        <div class="container text-center">
            <h4> <i> The image below shows the entire complete circuit with LEDs and buzzer: </i></h4>
       <p> <style="text-align:center;"><img src="./2.jpg" style="width:65%" alt="Circuit">
      </div>
      <p> With circuit complete, I began writing the code for the siren. I wanted the color pairs of the LEDs to flash separately and repeat in a loop. For the police siren sound, I found some code online of an ambulance siren. I played around with the delay() and tone() functions until the siren sounded more like a police siren. Original source code can be found <a href = "https://github.com/jigneshk5/Siren-Code-Arduino/blob/master/siren.ino"> here </a>. I divided the delay into two parts two control both pairs of LEDS separately.
        <h4> Complete sketch below: </h4>
      <pre> 
        <code>
  int input=0;
  int buzz=13; // Buzzer Pin
  int j=3;
  int k=12;
  void setup() {
  for(int i=3;i<=12;i++)
  pinMode(i,OUTPUT);
  pinMode(2,INPUT);
  }


  void settone(int input)
  {

  if(input==2)
  loop();
  }


   void loop() {        
    for(int i=4;i<=12;i+=2)
  digitalWrite(i,LOW);
  for(int i=3;i<=11;i+=2)
  digitalWrite(i,HIGH);
    for(int hz = 440; hz < 1000; hz++){
      tone(buzz, hz, 50);
      delay(4);
    }
  for(int i=3;i<=11;i+=2)
  digitalWrite(i,LOW);
   for(int i=4;i<=12;i+=2)
  digitalWrite(i,HIGH);
    for(int hz = 1000; hz > 440; hz--){
      tone(buzz, hz, 50);
      delay(4);
    }    }
  </code> </pre> </p>
<p> I played a round with different delay() values and tones. I settled on a delay of (4) amd a tone of (50) for the closest police siren sound. 
  <div class="container text-center">
           <h4> <i> Below is a video of my police siren: </i></h4>
       <p> <style="text-align:center;"><<video width="700" height="540" controls>
  <source src="2.mp4" type="video/mp4" alt="Block">
      </div>




</body>
</html>